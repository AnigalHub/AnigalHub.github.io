"use strict";(self["webpackChunktest_bis"]=self["webpackChunktest_bis"]||[]).push([[201],{7201:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pages"},[a("div",{staticClass:"nameTable"},[e._v("Операционные дни")]),a("b-table",{attrs:{"sticky-header":"",items:e.opDates,"select-mode":e.selectMode,selectable:"",fields:e.fields},on:{"row-selected":e.onRowSelected},scopedSlots:e._u([{key:"cell(Actions)",fn:function(t){var n=t.item;return[a("b-button",{attrs:{variant:"danger"},on:{click:function(t){return e.onDeleteOpDate(n)}}},[e._v("Удалить")])]}}])}),a("b-button",{attrs:{variant:"success"},on:{click:function(t){e.modalShow=!e.modalShow}}},[e._v("Создать")]),e.selected?a("div",{staticClass:"nameTable"},[e._v("Проводки операционного дня")]):e._e(),e.selected?a("b-table",{attrs:{"sticky-header":"",items:e.operations,fields:e.fieldsOperations}}):e._e(),a("modal-set-op-date",{attrs:{showModal:e.modalShow},on:{modalClosed:e.onModalClosed}})],1)},o=[],s=a(8534),r=(a(5666),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-modal",{attrs:{"hide-footer":""},model:{value:e.modalShow,callback:function(t){e.modalShow=t},expression:"modalShow"}},[a("b-form",{on:{submit:function(t){return t.preventDefault(),e.onSetOpDate.apply(null,arguments)}}},[a("b-input-group",{staticClass:"mb-2",attrs:{prepend:"Дата операционного дня"}},[a("b-form-input",{attrs:{state:e.stateOpDate,"aria-describedby":"inputFeedbackOpdate",id:"example-input",type:"text",placeholder:"YYYY-MM-DD",autocomplete:"off"},model:{value:e.OpDate,callback:function(t){e.OpDate=t},expression:"OpDate"}}),a("b-input-group-append",[a("b-form-datepicker",{attrs:{"button-only":"",right:"",locale:"en-US","aria-controls":"example-input"},on:{context:e.onContext},model:{value:e.OpDate,callback:function(t){e.OpDate=t},expression:"OpDate"}})],1),a("b-form-invalid-feedback",{attrs:{id:"inputFeedbackOpdate"}},[e._v(" "+e._s(e.errorTextOpDate)+" ")])],1),a("b-button",{staticClass:"mt-2 w-100",attrs:{type:"submit",variant:"success"}},[e._v("Сохранить")])],1)],1)}),i=[],l={name:"ModalSetOpDate",data:function(){return{modalShow:!1,OpDate:"",formatted:"",selected:"",errorTextOpDate:""}},props:{showModal:Boolean},computed:{stateOpDate:function(){return void 0===this.OpDate?(this.errorTextOpDate="Не введена дата операционного дня",!1):!!this.OpDate||void 0}},methods:{onContext:function(e){this.formatted=e.selectedFormatted,this.selected=e.selectedYMD},onSetOpDate:function(){var e=(0,s.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,""===this.OpDate){e.next=8;break}return e.next=4,this.$store.dispatch("opDate/setOpDate",{OpDate:this.OpDate});case 4:this.OpDate="",this.modalShow=!1,e.next=9;break;case 8:this.OpDate||(this.OpDate=void 0);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),console.log("произошла ошибка");case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));function t(){return e.apply(this,arguments)}return t}()},watch:{showModal:function(e){this.modalShow=e},modalShow:function(e){e||this.$emit("modalClosed")}}},c=l,u=a(3736),p=(0,u.Z)(c,r,i,!1,null,"0f9f1ea8",null),d=p.exports,h={name:"operatingDays",components:{ModalSetOpDate:d},data:function(){return{modalShow:!1,selected:null,operations:null,fields:[{key:"OpDate",label:"Дата операционного дня"},{key:"Actions",label:"Действия"}],fieldsOperations:[{key:"AcctNumDB",label:"Счет дебета"},{key:"AcctNumCr",label:"Счет кредита"},{key:"Amount",label:"Сумма"}],selectMode:"single"}},methods:{onModalClosed:function(){this.modalShow=!1},onDeleteOpDate:function(){var e=(0,s.Z)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("opDate/deleteOpDate",t);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),onRowSelected:function(e){e.length<=0?this.selected=null:this.selected=e[0]}},computed:{opDates:function(){return this.$store.getters["opDate/OpDates"]}},watch:{selected:function(){var e=(0,s.Z)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}return e.next=3,this.$store.dispatch("operations/filterByDate",t);case 3:this.operations=e.sent;case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},f=h,m=(0,u.Z)(f,n,o,!1,null,"1520f4f6",null),b=m.exports}}]);
//# sourceMappingURL=201-legacy.d56ce83b.js.map