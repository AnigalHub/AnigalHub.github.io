"use strict";(self["webpackChunktest_bis"]=self["webpackChunktest_bis"]||[]).push([[201],{201:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pages"},[a("div",{staticClass:"nameTable"},[e._v("Операционные дни")]),a("b-table",{attrs:{"sticky-header":"",items:e.opDates,"select-mode":e.selectMode,selectable:"",fields:e.fields},on:{"row-selected":e.onRowSelected},scopedSlots:e._u([{key:"cell(Actions)",fn:function(t){var o=t.item;return[a("b-button",{attrs:{variant:"danger"},on:{click:function(t){return e.onDeleteOpDate(o)}}},[e._v("Удалить")])]}}])}),a("b-button",{attrs:{variant:"success"},on:{click:function(t){e.modalShow=!e.modalShow}}},[e._v("Создать")]),e.selected?a("div",{staticClass:"nameTable"},[e._v("Проводки операционного дня")]):e._e(),e.selected?a("b-table",{attrs:{"sticky-header":"",items:e.operations,fields:e.fieldsOperations}}):e._e(),a("modal-set-op-date",{attrs:{showModal:e.modalShow},on:{modalClosed:e.onModalClosed}})],1)},s=[],l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-modal",{attrs:{"hide-footer":""},model:{value:e.modalShow,callback:function(t){e.modalShow=t},expression:"modalShow"}},[a("b-form",{on:{submit:function(t){return t.preventDefault(),e.onSetOpDate.apply(null,arguments)}}},[a("b-input-group",{staticClass:"mb-2",attrs:{prepend:"Дата операционного дня"}},[a("b-form-input",{attrs:{state:e.stateOpDate,"aria-describedby":"inputFeedbackOpdate",id:"example-input",type:"text",placeholder:"YYYY-MM-DD",autocomplete:"off"},model:{value:e.OpDate,callback:function(t){e.OpDate=t},expression:"OpDate"}}),a("b-input-group-append",[a("b-form-datepicker",{attrs:{"button-only":"",right:"",locale:"en-US","aria-controls":"example-input"},on:{context:e.onContext},model:{value:e.OpDate,callback:function(t){e.OpDate=t},expression:"OpDate"}})],1),a("b-form-invalid-feedback",{attrs:{id:"inputFeedbackOpdate"}},[e._v(" "+e._s(e.errorTextOpDate)+" ")])],1),a("b-button",{staticClass:"mt-2 w-100",attrs:{type:"submit",variant:"success"}},[e._v("Сохранить")])],1)],1)},n=[],i={name:"ModalSetOpDate",data(){return{modalShow:!1,OpDate:"",formatted:"",selected:"",errorTextOpDate:""}},props:{showModal:Boolean},computed:{stateOpDate(){return void 0===this.OpDate?(this.errorTextOpDate="Не введена дата операционного дня",!1):!!this.OpDate||void 0}},methods:{onContext(e){this.formatted=e.selectedFormatted,this.selected=e.selectedYMD},onSetOpDate:async function(){try{""!==this.OpDate?(await this.$store.dispatch("opDate/setOpDate",{OpDate:this.OpDate}),this.OpDate="",this.modalShow=!1):this.OpDate||(this.OpDate=void 0)}catch(e){console.log("произошла ошибка")}}},watch:{showModal:function(e){this.modalShow=e},modalShow:function(e){e||this.$emit("modalClosed")}}},c=i,r=a(736),d=(0,r.Z)(c,l,n,!1,null,"0f9f1ea8",null),p=d.exports,u={name:"operatingDays",components:{ModalSetOpDate:p},data(){return{modalShow:!1,selected:null,operations:null,fields:[{key:"OpDate",label:"Дата операционного дня"},{key:"Actions",label:"Действия"}],fieldsOperations:[{key:"AcctNumDB",label:"Счет дебета"},{key:"AcctNumCr",label:"Счет кредита"},{key:"Amount",label:"Сумма"}],selectMode:"single"}},methods:{onModalClosed:function(){this.modalShow=!1},onDeleteOpDate:async function(e){await this.$store.dispatch("opDate/deleteOpDate",e)},onRowSelected:function(e){e.length<=0?this.selected=null:this.selected=e[0]}},computed:{opDates:function(){return this.$store.getters["opDate/OpDates"]}},watch:{selected:async function(e){e&&(this.operations=await this.$store.dispatch("operations/filterByDate",e))}}},h=u,m=(0,r.Z)(h,o,s,!1,null,"1520f4f6",null),f=m.exports}}]);
//# sourceMappingURL=201.0b2bfc8e.js.map